<!DOCTYPE html>

<html class="NDPage NDContentPage"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta http-equiv="X-UA-Compatible" content="IE=edge"><title>Primitive Cylinder</title><link rel="stylesheet" type="text/css" href="../../../styles/main.css" /><script type="text/javascript" src="../../../styles/main.js"></script><script type="text/javascript">NDLoader.LoadJS("Content", "../../../styles/");</script></head>

<!-- Generated by Natural Docs, version 2.3 -->

<!-- saved from url=(0016)http://localhost -->

<body onload="NDLoader.OnLoad('Content');">

<script type="text/javascript">var q = window.location.search;if (q.startsWith("?Theme=")){var t = q.slice(7);var e = t.indexOf(";");if (e != -1){  t = t.slice(0, e);  }document.documentElement.classList.add(t + "Theme")}</script>

<a name="Topic4"></a><div class="CTopic TClass LLua first">
 <div class="CTitle"><span class="Qualifier">Examples.</span>&#8203;Primitive Cylinder</div>
 <div class="CBody"><p>Draws a spinning crystal made up of two cylinders at the specified location.</p><p>Uses &lt;render.DrawCylinder: Libraries.render.DrawCylinder&gt;.</p><pre class="CCode"><span class="SHKeyword">if</span> SERVER <span class="SHKeyword">then</span><br />    <span class="SHKeyword">return</span><br />end<br /><br />local pos = Vector(<span class="SHNumber">0</span>, <span class="SHNumber">0</span>, <span class="SHNumber">150</span>)<br />local mat = Material(<span class="SHString">&quot;models/props_combine/combine_interface_disp&quot;</span>)<br /><br /><span class="SHComment">-- Persisted variables</span><br />local ang = Angle()<br />local vel = Angle()<br />local targetVel = Angle()<br /><br />hook.Add(<span class="SHString">&quot;PostDrawTranslucentRenderables&quot;</span>, <span class="SHString">&quot;test&quot;</span>, <span class="SHKeyword">function</span>()<br />    <span class="SHKeyword">if</span> vel == targetVel <span class="SHKeyword">then</span><br />        targetVel = AngleRand(<span class="SHNumber">-50</span>, <span class="SHNumber">50</span>)<br />    end<br /><br />    vel.p = math.Approach(vel.p, targetVel.p, FrameTime() * <span class="SHNumber">5</span>)<br />    vel.y = math.Approach(vel.y, targetVel.y, FrameTime() * <span class="SHNumber">5</span>)<br />    vel.r = math.Approach(vel.r, targetVel.r, FrameTime() * <span class="SHNumber">5</span>)<br /><br />    ang = ang + vel * FrameTime()<br /><br />    local height = <span class="SHNumber">40</span><br />    local radius = <span class="SHNumber">20</span><br />    local steps = <span class="SHNumber">8</span><br /><br />    render.SetMaterial(mat)<br />    render.DrawCylinder(pos, ang, height, radius, <span class="SHNumber">0</span>, steps)<br /><br />    render.CullMode(MATERIAL_CULLMODE_CW)<br />    render.DrawCylinder(pos, ang, -height, radius, <span class="SHNumber">0</span>, steps)<br />    render.CullMode(MATERIAL_CULLMODE_CCW)<br />end)</pre></div>
</div>

</body></html>